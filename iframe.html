<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body style="margin:0;">
    <script>
        const script = document.createElement('script');
        script.src = window.location.href.replace('iframe.html', 'embed-v2.js');
        document.body.appendChild(script);

        const notifyHeight = () => {
            height = document.body.scrollHeight;
            console.log(`Height changed to ${height}`);
            window.parent.postMessage({
                type: 'iframe-height',
                height
            }, '*');
        };

        const observer = new MutationObserver(notifyHeight);
        observer.observe(document.body, {
            subtree: true,
            childList: true,
        });

    </script>
</body>

</html>